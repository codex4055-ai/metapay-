<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wallet System</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 500px;
      margin: auto;
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.1);
    }

    h2 {
      margin-bottom: 20px;
      font-weight: bold;
      text-align: center;
    }

    input, button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    button:hover {
      background: #0056b3;
    }

    .page { display: none; }
    .active { display: block; }

    /* Balance style */
    .balance-card {
      background: #27ae60;
      color: #fff;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
    }

    /* Withdraw history */
    #historyList {
      text-align: left;
      font-size: 14px;
      margin-top: 15px;
      padding: 10px;
      background: #f1f2f6;
      border-radius: 8px;
      max-height: 150px;
      overflow-y: auto;
    }

    /* WhatsApp floating button */
    .whatsapp-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #25d366;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0px 4px 8px rgba(0,0,0,0.3);
      cursor: pointer;
    }
    .whatsapp-btn img {
      width: 30px;
      height: 30px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Register Page -->
    <div id="registerPage" class="page active">
      <h2>Register</h2>
      <input type="text" id="regUser" placeholder="Username">
      <input type="password" id="regPass" placeholder="Password">
      <button onclick="register()">Register</button>
      <p>Already have an account? <a href="#" onclick="showPage('loginPage')">Login</a></p>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="page">
      <h2>Login</h2>
      <input type="text" id="logUser" placeholder="Username">
      <input type="password" id="logPass" placeholder="Password">
      <button onclick="login()">Login</button>
      <p>No account? <a href="#" onclick="showPage('registerPage')">Register</a></p>
    </div>

    <!-- Dashboard -->
    <div id="dashboardPage" class="page">
      <h2>Dashboard</h2>
      <div class="balance-card">
        Balance: ₦<span id="balance">0</span>
      </div>
      <button onclick="showPage('withdrawPage')">Withdraw</button>
      <button onclick="showPage('buyCodePage')">Buy Code</button>
      <button onclick="logout()">Logout</button>
    </div>

    <!-- Withdraw Page -->
    <div id="withdrawPage" class="page">
      <h2>Withdraw</h2>
      <input type="text" id="bankDetails" placeholder="Enter Account Number & Bank">
      <input type="number" id="withdrawAmount" placeholder="Amount">
      <input type="password" id="withdrawCode" placeholder="Enter Withdraw Code">
      <button onclick="withdraw()">Submit</button>
      <h3>History</h3>
      <div id="historyList"></div>
      <button onclick="showPage('dashboardPage')">Back</button>
    </div>

    <!-- Buy Code Page -->
    <div id="buyCodePage" class="page">
      <h2>Buy Code</h2>
      <input type="email" id="email" placeholder="Enter your Email">
      <input type="tel" id="phone" placeholder="Enter your Phone">
      <button onclick="showBankDetails()">Proceed</button>
      <div id="bankInfo" style="margin-top:15px; display:none;">
        <p><b>Send ₦5000 to:</b></p>
        <p>Account: <b>8123227444</b></p>
        <p>Bank: <b>Palmpay</b></p>
        <p>Name: <b>Victor Joseph</b></p>
      </div>
      <button onclick="showPage('dashboardPage')">Back</button>
    </div>
  </div>

  <!-- WhatsApp floating button -->
  <a href="https://wa.me/2348144281750" target="_blank" class="whatsapp-btn">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
  </a>

  <script>
    let currentUser = null;
    let withdrawCode = "141414";

    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if (id === 'dashboardPage') updateBalance();
    }

    function register() {
      let user = document.getElementById('regUser').value;
      let pass = document.getElementById('regPass').value;
      if (user && pass) {
        localStorage.setItem(user, JSON.stringify({pass: pass, balance: 250000, history: [], lastBonus: Date.now()}));
        alert("Registration successful!");
        showPage('loginPage');
      } else {
        alert("Fill all fields!");
      }
    }

    function login() {
      let user = document.getElementById('logUser').value;
      let pass = document.getElementById('logPass').value;
      let data = localStorage.getItem(user);
      if (data) {
        let obj = JSON.parse(data);
        if (obj.pass === pass) {
          currentUser = user;
          alert("You have received ₦250,000!");
          showPage('dashboardPage');
        } else {
          alert("Wrong password!");
        }
      } else {
        alert("User not found!");
      }
    }

    function logout() {
      currentUser = null;
      showPage('loginPage');
    }

    function updateBalance() {
      if (!currentUser) return;
      let data = JSON.parse(localStorage.getItem(currentUser));
      let now = Date.now();
      if (now - data.lastBonus >= 24*60*60*1000) {
        data.balance += 10000;
        data.lastBonus = now;
        localStorage.setItem(currentUser, JSON.stringify(data));
      }
      document.getElementById('balance').textContent = data.balance.toLocaleString();
    }

    function withdraw() {
      let details = document.getElementById('bankDetails').value;
      let amount = parseInt(document.getElementById('withdrawAmount').value);
      let code = document.getElementById('withdrawCode').value;

      let data = JSON.parse(localStorage.getItem(currentUser));
      if (code !== withdrawCode) {
        alert("Wrong withdraw code!");
        return;
      }
      if (amount > data.balance) {
        alert("Insufficient balance!");
        return;
      }
      if (!details || !amount) {
        alert("Fill all fields!");
        return;
      }

      data.balance -= amount;
      data.history.push(`Withdrew ₦${amount} to ${details}`);
      localStorage.setItem(currentUser, JSON.stringify(data));
      alert("Withdrawal successful!");
      updateBalance();
      document.getElementById('historyList').innerHTML = data.history.map(h => `<p>${h}</p>`).join("");
    }

    function showBankDetails() {
      document.getElementById('bankInfo').style.display = "block";
    }
  </script>
</body>
</html>