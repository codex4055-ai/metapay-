<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Codexster Platform</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #4e54c8, #8f94fb);
      color: #fff;
    }
    header {
      text-align: center;
      padding: 20px;
      font-size: 24px;
      font-weight: bold;
      animation: slideDown 1s ease-in-out;
    }
    @keyframes slideDown {
      from {transform: translateY(-50px); opacity: 0;}
      to {transform: translateY(0); opacity: 1;}
    }
    .container {
      max-width: 400px;
      margin: 30px auto;
      background: rgba(0,0,0,0.6);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.4);
      animation: fadeIn 1s ease-in;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    input, select, button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      font-size: 15px;
    }
    input, select {
      background: #f1f1f1;
      color: #333;
    }
    button {
      background: #ff9800;
      color: white;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover {
      transform: scale(1.05);
      background: #e68900;
    }
    .hidden { display: none; }
    nav {
      text-align: center;
      margin-bottom: 20px;
    }
    nav button {
      background: #2196F3;
      margin: 0 5px;
    }
    footer {
      text-align: center;
      padding: 15px;
      margin-top: 30px;
      font-size: 14px;
      background: rgba(0,0,0,0.7);
    }
    .balance-box {
      background: #2196F3;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 8px;
      color: #000;
      background: #fff;
    }
    table th {
      background: #2196F3;
      color: #fff;
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      color: #333;
      animation: popIn 0.5s ease;
    }
    @keyframes popIn {
      from {transform: scale(0.5); opacity: 0;}
      to {transform: scale(1); opacity: 1;}
    }
  </style>
</head>
<body>
  <header>Welcome to metapay.Register and get NGN150000</header>

  <!-- Registration Form -->
  <div class="container" id="registerPage">
    <h2>Register</h2>
    <input type="text" id="regName" placeholder="Full Name" required>
    <input type="email" id="regEmail" placeholder="Email" required>
    <input type="password" id="regPass" placeholder="Password" required>
    <button onclick="register()">Register</button>
    <p>Already have an account? <a href="#" onclick="showLogin()">Login here</a></p>
  </div>

  <!-- Login Form -->
  <div class="container hidden" id="loginPage">
    <h2>Login</h2>
    <input type="email" id="logEmail" placeholder="Email" required>
    <input type="password" id="logPass" placeholder="Password" required>
    <button onclick="login()">Login</button>
    <p>Don’t have an account? <a href="#" onclick="showRegister()">Register here</a></p>
  </div>

  <!-- Dashboard -->
  <div class="container hidden" id="dashboardPage">
    <h2>Welcome, <span id="userName"></span></h2>
    <div class="balance-box">Balance: ₦<span id="balance">0</span></div>
    <p id="welcomeMsg" style="color:lightgreen;"></p>
    <nav>
      <button onclick="showWithdraw()">Withdraw</button>
      <br><br>
      <button onclick="showBuyCode()">Buy Redeem Code</button><br><br>
      <button onclick="showHistory()">Transaction History</button>
    </nav>
    <div id="dashContent"></div>
  </div>

  <!-- Modal -->
  <div class="modal" id="processModal">
    <div class="modal-content">
      <h3>Processing withdrawal...</h3>
      <p>Please wait a moment</p>
    </div>
  </div>

  <footer>© Codexster 2025</footer>

  <script>
    let users = JSON.parse(localStorage.getItem("users")) || [];
    let currentUser = null;
    const SECRET_CODE = "225500"; // only you (admin) know this

    function register() {
      let name = document.getElementById("regName").value;
      let email = document.getElementById("regEmail").value;
      let pass = document.getElementById("regPass").value;

      if(!name || !email || !pass){
        alert("Please fill all fields");
        return;
      }
      if(users.find(u=>u.email === email)){
        alert("Email already registered!");
        return;
      }
      let user = {name, email, pass, balance:150000, transactions:[], hasCode:false};
      users.push(user);
      localStorage.setItem("users", JSON.stringify(users));
      alert("You have successfully registered and received ₦150,000!");
      showLogin();
    }

    function login() {
      let email = document.getElementById("logEmail").value;
      let pass = document.getElementById("logPass").value;

      let user = users.find(u=>u.email === email && u.pass === pass);
      if(!user){
        alert("Invalid login!");
        return;
      }
      currentUser = user;
      localStorage.setItem("currentUser", JSON.stringify(user));
      loadDashboard();
    }

    function loadDashboard() {
      document.getElementById("registerPage").classList.add("hidden");
      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById("dashboardPage").classList.remove("hidden");

      let user = JSON.parse(localStorage.getItem("currentUser"));
      document.getElementById("userName").textContent = user.name;
      document.getElementById("balance").textContent = user.balance;
      document.getElementById("welcomeMsg").textContent = "You have successfully registered and received ₦150,000.";
    }

    function showRegister(){
      document.getElementById("registerPage").classList.remove("hidden");
      document.getElementById("loginPage").classList.add("hidden");
    }
    function showLogin(){
      document.getElementById("loginPage").classList.remove("hidden");
      document.getElementById("registerPage").classList.add("hidden");
    }

    function showWithdraw(){
      document.getElementById("dashContent").innerHTML = `
        <h3>Withdraw Funds</h3>
        <input type="number" id="amount" placeholder="Enter Amount">
        <input type="text" id="bank" placeholder="Select Bank">
        <input type="text" id="acctNo" placeholder="Account Number">
        <input type="text" id="acctName" placeholder="Account Name">
        <input type="password" id="userCode" placeholder="Enter Redeem Code">
        <button onclick="withdraw()">Withdraw</button>
      `;
    }

    function withdraw(){
      let amt = parseInt(document.getElementById("amount").value);
      let code = document.getElementById("userCode").value;
      let user = JSON.parse(localStorage.getItem("currentUser"));

      if(code !== SECRET_CODE){
        alert("Invalid or missing redeem code! Please your redeem buy .");
        return;
      }
      if(amt > user.balance){
        alert("Insufficient balance!");
        return;
      }

      document.getElementById("processModal").style.display = "flex";

      setTimeout(()=>{
        document.getElementById("processModal").style.display = "none";
        user.balance -= amt;
        user.transactions.push({type:"Withdraw", amount:amt, status:"Successful", date:new Date().toLocaleString()});
        localStorage.setItem("currentUser", JSON.stringify(user));
        users = users.map(u=>u.email===user.email?user:u);
        localStorage.setItem("users", JSON.stringify(users));
        document.getElementById("balance").textContent = user.balance;
        alert("Withdrawal successful!");
      }, 2000); // fake delay
    }

    function showBuyCode(){
      document.getElementById("dashContent").innerHTML = `
        <h3>Buy Redeem Code</h3>
        <p>Please make a payment 5000 for the code fee to the account below:</p>
        <p><b>Bank:</b> Opay Bank</p>
        <p><b>Account Number:</b> <span id="acctNoCopy">8144281750</span> 
        <p><b>Account Name:</b>Dauda Joseph</p>
      <button onclick="copyAcct()">Copy</button></p>
        
        <button onclick="confirmPayment()">I have made the payment</button>
      `;
    }

    function copyAcct(){
      let text = document.getElementById("acctNoCopy").textContent;
      navigator.clipboard.writeText(text);
      alert("Account number copied!");
    }

    function confirmPayment(){
      let user = JSON.parse(localStorage.getItem("currentUser"));
      user.transactions.push({type:"Buy Redeem Code", amount:"-", status:"Processing", date:new Date().toLocaleString()});
      localStorage.setItem("currentUser", JSON.stringify(user));
      users = users.map(u=>u.email===user.email?user:u);
      localStorage.setItem("users", JSON.stringify(users));
      alert("Your payment is being processed. Please wait for the admin to send your redeem code.");
    }

    function showHistory(){
      let user = JSON.parse(localStorage.getItem("currentUser"));
      let rows = user.transactions.map(t=>`
        <tr>
          <td>${t.date}</td>
          <td>${t.type}</td>
          <td>${t.amount}</td>
          <td>${t.status}</td>
        </tr>
      `).join("");
      document.getElementById("dashContent").innerHTML = `
        <h3>Transaction History</h3>
        <table>
          <tr><th>Date</th><th>Type</th><th>Amount</th><th>Status</th></tr>
          ${rows || "<tr><td colspan='4'>No transactions yet</td></tr>"}
        </table>
      `;
    }

    // Auto load dashboard if already logged in
    if(localStorage.getItem("currentUser")){
      loadDashboard();
    }
  </script>
</body>
</html>